<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functional Color Harmonizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 900px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .input-section {
            display: flex;
            gap: 15px;
            margin-bottom: 40px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .color-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #colorInput {
            padding: 12px 20px;
            font-size: 1.1em;
            border: 2px solid #667eea;
            border-radius: 10px;
            text-transform: uppercase;
            font-weight: bold;
            letter-spacing: 1px;
            width: 150px;
            transition: all 0.3s ease;
        }

        #colorInput:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        #colorPicker {
            width: 60px;
            height: 50px;
            border: 2px solid #667eea;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        #colorPicker:hover {
            transform: scale(1.05);
        }

        .harmony-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .color-card {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .color-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .color-preview {
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.3s ease;
        }

        .color-label {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255, 255, 255, 0.9);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: bold;
            color: #333;
        }

        .color-info {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
        }

        .color-value {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #333;
            font-size: 1em;
            margin-bottom: 5px;
        }

        .color-type {
            color: #666;
            font-size: 0.9em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .info-box {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-top: 30px;
            border-radius: 5px;
        }

        .info-box h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #555;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2em;
            }

            .harmony-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ðŸŽ¨ Color Harmonizer</h1>
        <p class="subtitle">Discover perfect color harmonies using functional programming</p>

        <div class="input-section">
            <div class="color-input-wrapper">
                <input type="text" id="colorInput" placeholder="#1F8FFF" value="#1F8FFF" maxlength="7">
                <input type="color" id="colorPicker" value="#1F8FFF">
            </div>
        </div>

        <div class="harmony-grid">
            <div class="color-card">
                <div class="color-preview" id="baseDisplay">
                    <span class="color-label">Base</span>
                </div>
                <div class="color-info">
                    <div class="color-value" id="baseHex">#1F8FFF</div>
                    <div class="color-type">Original Color</div>
                </div>
            </div>

            <div class="color-card">
                <div class="color-preview" id="complementaryDisplay">
                    <span class="color-label">Complementary</span>
                </div>
                <div class="color-info">
                    <div class="color-value" id="complementaryHex">#FF8F1F</div>
                    <div class="color-type">180Â° Rotation</div>
                </div>
            </div>

            <div class="color-card">
                <div class="color-preview" id="triadic1Display">
                    <span class="color-label">Triadic 1</span>
                </div>
                <div class="color-info">
                    <div class="color-value" id="triadic1Hex">#8FFF1F</div>
                    <div class="color-type">120Â° Rotation</div>
                </div>
            </div>

            <div class="color-card">
                <div class="color-preview" id="triadic2Display">
                    <span class="color-label">Triadic 2</span>
                </div>
                <div class="color-info">
                    <div class="color-value" id="triadic2Hex">#FF1F8F</div>
                    <div class="color-type">240Â° Rotation</div>
                </div>
            </div>
        </div>

        <div class="info-box">
            <h3>How it works</h3>
            <p>
                <strong>Complementary colors</strong> are opposite on the color wheel (180Â°), creating maximum contrast.
                <strong>Triadic colors</strong> are evenly spaced at 120Â° intervals, forming a balanced harmony.
                This tool uses pure functional programming to calculate these harmonies instantly.
            </p>
        </div>
    </div>

    <script>
        // ==========================================
        // PURE FUNCTIONS (No Side Effects)
        // ==========================================

        /**
         * Converts a HEX color string to HSL array
         * @param {string} hex - Six-digit hex color (e.g., "#1F8FFF")
         * @returns {number[]} [H (0-360), S (0-100), L (0-100)]
         */
        function hexToHsl(hex) {
            var cleanHex = hex.replace('#', '');
            var r = parseInt(cleanHex.substring(0, 2), 16) / 255;
            var g = parseInt(cleanHex.substring(2, 4), 16) / 255;
            var b = parseInt(cleanHex.substring(4, 6), 16) / 255;

            var max = Math.max(r, g, b);
            var min = Math.min(r, g, b);
            var delta = max - min;

            var l = (max + min) / 2;
            var s = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));

            var h = 0;
            if (delta !== 0) {
                if (max === r) {
                    h = ((g - b) / delta + (g < b ? 6 : 0)) / 6;
                } else if (max === g) {
                    h = ((b - r) / delta + 2) / 6;
                } else {
                    h = ((r - g) / delta + 4) / 6;
                }
            }

            return [
                Math.round(h * 360),
                Math.round(s * 100),
                Math.round(l * 100)
            ];
        }

        /**
         * Calculates complementary and triadic color harmonies
         * @param {number[]} baseHsl - Base HSL array [H, S, L]
         * @returns {object} Object containing complementary and triadic HSL arrays
         */
        function calculateHarmonies(baseHsl) {
            var h = baseHsl[0];
            var s = baseHsl[1];
            var l = baseHsl[2];

            return {
                complementary: [(h + 180) % 360, s, l],
                triadic1: [(h + 120) % 360, s, l],
                triadic2: [(h + 240) % 360, s, l]
            };
        }

        /**
         * Converts HSL array to CSS-compatible string
         * @param {number[]} hsl - HSL array [H, S, L]
         * @returns {string} CSS HSL string (e.g., "hsl(200, 50%, 50%)")
         */
        function hslToCss(hsl) {
            var h = hsl[0];
            var s = hsl[1];
            var l = hsl[2];
            return 'hsl(' + h + ', ' + s + '%, ' + l + '%)';
        }

        /**
         * Converts HSL to HEX for display
         * @param {number[]} hsl - HSL array [H, S, L]
         * @returns {string} HEX color string
         */
        function hslToHex(hsl) {
            var h = hsl[0] / 360;
            var s = hsl[1] / 100;
            var l = hsl[2] / 100;

            var r, g, b;

            if (s === 0) {
                r = g = b = l;
            } else {
                function hue2rgb(p, q, t) {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1 / 6) return p + (q - p) * 6 * t;
                    if (t < 1 / 2) return q;
                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                    return p;
                }

                var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                var p = 2 * l - q;
                r = hue2rgb(p, q, h + 1 / 3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1 / 3);
            }

            function toHex(x) {
                var hex = Math.round(x * 255).toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            }

            return '#' + toHex(r) + toHex(g) + toHex(b);
        }

        // ==========================================
        // STATE SYNCHRONIZATION (DOM Interaction)
        // ==========================================

        /**
         * Updates all color displays based on current input value
         * This is the ONLY function that interacts with the DOM
         */
        function updateColors() {
            var colorInput = document.getElementById('colorInput');
            var baseDisplay = document.getElementById('baseDisplay');
            var baseHex = document.getElementById('baseHex');
            var complementaryDisplay = document.getElementById('complementaryDisplay');
            var complementaryHex = document.getElementById('complementaryHex');
            var triadic1Display = document.getElementById('triadic1Display');
            var triadic1Hex = document.getElementById('triadic1Hex');
            var triadic2Display = document.getElementById('triadic2Display');
            var triadic2Hex = document.getElementById('triadic2Hex');

            var hexValue = colorInput.value.trim();

            if (hexValue.charAt(0) !== '#') {
                hexValue = '#' + hexValue;
            }

            var hexPattern = /^#[0-9A-Fa-f]{6}$/;
            if (!hexPattern.test(hexValue)) {
                return;
            }

            var baseHsl = hexToHsl(hexValue);
            var harmonies = calculateHarmonies(baseHsl);

            var baseCss = hslToCss(baseHsl);
            var complementaryCss = hslToCss(harmonies.complementary);
            var triadic1Css = hslToCss(harmonies.triadic1);
            var triadic2Css = hslToCss(harmonies.triadic2);

            baseDisplay.style.backgroundColor = baseCss;
            baseHex.textContent = hexValue.toUpperCase();

            complementaryDisplay.style.backgroundColor = complementaryCss;
            complementaryHex.textContent = hslToHex(harmonies.complementary).toUpperCase();

            triadic1Display.style.backgroundColor = triadic1Css;
            triadic1Hex.textContent = hslToHex(harmonies.triadic1).toUpperCase();

            triadic2Display.style.backgroundColor = triadic2Css;
            triadic2Hex.textContent = hslToHex(harmonies.triadic2).toUpperCase();
        }

        // ==========================================
        // EVENT LISTENERS (Initialize on page load)
        // ==========================================

        window.onload = function () {
            document.getElementById('colorInput').addEventListener('input', updateColors);

            document.getElementById('colorPicker').addEventListener('input', function (e) {
                document.getElementById('colorInput').value = e.target.value;
                updateColors();
            });

            document.getElementById('colorInput').addEventListener('input', function (e) {
                var hex = e.target.value;
                var hexPattern = /^#[0-9A-Fa-f]{6}$/;
                if (hexPattern.test(hex)) {
                    document.getElementById('colorPicker').value = hex;
                }
            });

            updateColors();
        };
    </script>
</body>

</html>